{"ast":null,"code":"import React, { useRef, useEffect } from 'react';\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Animated from \"react-native-web/dist/exports/Animated\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport { Text, Surface, useTheme, IconButton, Badge, FAB } from 'react-native-paper';\nimport { Ionicons } from '@expo/vector-icons';\nimport ProductCard from \"../components/ProductCard\";\nimport { PRODUCTS } from \"../data/products\";\nimport { useCart } from \"../contexts/CartContext\";\nimport { useAuth } from \"../contexts/AuthContext\";\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nexport default function ProductsScreen(_ref) {\n  var navigation = _ref.navigation;\n  var _useCart = useCart(),\n    add = _useCart.add,\n    items = _useCart.items,\n    clear = _useCart.clear;\n  var _useAuth = useAuth(),\n    logout = _useAuth.logout;\n  var theme = useTheme();\n  var cartItemsCount = items.reduce(function (sum, item) {\n    return sum + item.quantity;\n  }, 0);\n  var fadeAnim = useRef(new Animated.Value(0)).current;\n  useEffect(function () {\n    Animated.timing(fadeAnim, {\n      toValue: 1,\n      duration: 400,\n      useNativeDriver: true\n    }).start();\n  }, []);\n  var handleClearCart = function handleClearCart() {\n    if (!cartItemsCount) return;\n    Alert.alert('Vaciar carrito', '¿Deseas eliminar todos los productos?', [{\n      text: 'Cancelar',\n      style: 'cancel'\n    }, {\n      text: 'Vaciar',\n      style: 'destructive',\n      onPress: clear\n    }]);\n  };\n  return _jsxs(SafeAreaView, {\n    style: [styles.container, {\n      backgroundColor: theme.colors.background\n    }],\n    children: [_jsxs(Surface, {\n      elevation: 3,\n      style: styles.header,\n      children: [_jsxs(View, {\n        children: [_jsx(Text, {\n          variant: \"labelLarge\",\n          style: {\n            color: theme.colors.onSurfaceVariant\n          },\n          children: \"Bienvenido\"\n        }), _jsx(Text, {\n          variant: \"headlineMedium\",\n          style: {\n            fontWeight: '800',\n            color: theme.colors.primary\n          },\n          children: \"Nuestros Productos\"\n        })]\n      }), _jsxs(View, {\n        style: styles.actions,\n        children: [_jsxs(View, {\n          children: [_jsx(IconButton, {\n            icon: function icon() {\n              return _jsx(Ionicons, {\n                name: \"cart\",\n                size: 22,\n                color: \"#fff\"\n              });\n            },\n            style: {\n              backgroundColor: theme.colors.primary\n            },\n            onPress: function onPress() {\n              return navigation.navigate('Cart');\n            }\n          }), cartItemsCount > 0 && _jsx(Badge, {\n            size: 18,\n            style: {\n              position: 'absolute',\n              top: 2,\n              right: 2,\n              backgroundColor: theme.colors.error,\n              color: '#fff'\n            },\n            children: cartItemsCount\n          })]\n        }), cartItemsCount > 0 && _jsx(IconButton, {\n          icon: function icon() {\n            return _jsx(Ionicons, {\n              name: \"trash-outline\",\n              size: 22,\n              color: \"#fff\"\n            });\n          },\n          style: {\n            backgroundColor: theme.colors.error\n          },\n          onPress: handleClearCart\n        }), _jsx(IconButton, {\n          icon: function icon() {\n            return _jsx(Ionicons, {\n              name: \"log-out-outline\",\n              size: 22,\n              color: theme.colors.error\n            });\n          },\n          onPress: logout,\n          style: styles.logoutBtn,\n          mode: \"contained-tonal\"\n        })]\n      })]\n    }), _jsx(Animated.View, {\n      style: {\n        flex: 1,\n        opacity: fadeAnim,\n        transform: [{\n          translateY: fadeAnim.interpolate({\n            inputRange: [0, 1],\n            outputRange: [20, 0]\n          })\n        }]\n      },\n      children: _jsx(FlatList, {\n        data: PRODUCTS,\n        keyExtractor: function keyExtractor(p) {\n          return p.id;\n        },\n        renderItem: function renderItem(_ref2) {\n          var item = _ref2.item;\n          return _jsx(ProductCard, {\n            product: item,\n            onAdd: add\n          });\n        },\n        contentContainerStyle: styles.listContent,\n        showsVerticalScrollIndicator: false\n      })\n    }), cartItemsCount > 0 && _jsx(FAB, {\n      icon: \"cart-check\",\n      label: \"Ver carrito (\" + cartItemsCount + \")\",\n      style: [styles.fab, {\n        backgroundColor: theme.colors.success\n      }],\n      color: \"#fff\",\n      onPress: function onPress() {\n        return navigation.navigate('Cart');\n      }\n    })]\n  });\n}\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1\n  },\n  header: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    paddingHorizontal: 18,\n    paddingVertical: 12,\n    margin: 12,\n    borderRadius: 16,\n    backgroundColor: '#fff'\n  },\n  actions: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 6\n  },\n  listContent: {\n    paddingHorizontal: 12,\n    paddingBottom: 90\n  },\n  fab: {\n    position: 'absolute',\n    bottom: 20,\n    right: 20,\n    borderRadius: 30,\n    elevation: 6\n  },\n  logoutBtn: {\n    backgroundColor: '#fff'\n  }\n});","map":{"version":3,"names":["React","useRef","useEffect","SafeAreaView","FlatList","StyleSheet","Animated","View","Alert","Text","Surface","useTheme","IconButton","Badge","FAB","Ionicons","ProductCard","PRODUCTS","useCart","useAuth","jsx","_jsx","jsxs","_jsxs","ProductsScreen","_ref","navigation","_useCart","add","items","clear","_useAuth","logout","theme","cartItemsCount","reduce","sum","item","quantity","fadeAnim","Value","current","timing","toValue","duration","useNativeDriver","start","handleClearCart","alert","text","style","onPress","styles","container","backgroundColor","colors","background","children","elevation","header","variant","color","onSurfaceVariant","fontWeight","primary","actions","icon","name","size","navigate","position","top","right","error","logoutBtn","mode","flex","opacity","transform","translateY","interpolate","inputRange","outputRange","data","keyExtractor","p","id","renderItem","_ref2","product","onAdd","contentContainerStyle","listContent","showsVerticalScrollIndicator","label","fab","success","create","flexDirection","justifyContent","alignItems","paddingHorizontal","paddingVertical","margin","borderRadius","gap","paddingBottom","bottom"],"sources":["C:/Users/Digitacion Nery/Desktop/TornilloFeliz/APP_MOBILE_DESARROLLO/src/screens/ProductsScreen.tsx"],"sourcesContent":["import React, { useRef, useEffect } from 'react';\r\nimport { SafeAreaView, FlatList, StyleSheet, Animated, View, Alert } from 'react-native';\r\nimport { Text, Surface, useTheme, IconButton, Badge, FAB } from 'react-native-paper';\r\nimport { Ionicons } from '@expo/vector-icons';\r\nimport ProductCard from '../components/ProductCard';\r\nimport { PRODUCTS } from '../data/products';\r\nimport { useCart } from '../contexts/CartContext';\r\nimport { useAuth } from '../contexts/AuthContext';\r\n\r\nexport default function ProductsScreen({ navigation }: any) {\r\n  const { add, items, clear } = useCart();\r\n  const { logout } = useAuth();\r\n  const theme = useTheme();\r\n\r\n  const cartItemsCount = items.reduce((sum, item) => sum + item.quantity, 0);\r\n\r\n  // Animación de entrada\r\n  const fadeAnim = useRef(new Animated.Value(0)).current;\r\n  useEffect(() => {\r\n    Animated.timing(fadeAnim, {\r\n      toValue: 1,\r\n      duration: 400,\r\n      useNativeDriver: true,\r\n    }).start();\r\n  }, []);\r\n\r\n  const handleClearCart = () => {\r\n    if (!cartItemsCount) return;\r\n    Alert.alert('Vaciar carrito', '¿Deseas eliminar todos los productos?', [\r\n      { text: 'Cancelar', style: 'cancel' },\r\n      { text: 'Vaciar', style: 'destructive', onPress: clear },\r\n    ]);\r\n  };\r\n\r\n  return (\r\n    <SafeAreaView style={[styles.container, { backgroundColor: theme.colors.background }]}>\r\n      {/* Encabezado personalizado */}\r\n      <Surface elevation={3} style={styles.header}>\r\n        <View>\r\n          <Text variant=\"labelLarge\" style={{ color: theme.colors.onSurfaceVariant }}>\r\n            Bienvenido\r\n          </Text>\r\n          <Text variant=\"headlineMedium\" style={{ fontWeight: '800', color: theme.colors.primary }}>\r\n            Nuestros Productos\r\n          </Text>\r\n        </View>\r\n\r\n        <View style={styles.actions}>\r\n          {/* Botón Carrito */}\r\n          <View>\r\n            <IconButton\r\n              icon={() => <Ionicons name=\"cart\" size={22} color=\"#fff\" />}\r\n              style={{ backgroundColor: theme.colors.primary }}\r\n              onPress={() => navigation.navigate('Cart')}\r\n            />\r\n            {cartItemsCount > 0 && (\r\n              <Badge\r\n                size={18}\r\n                style={{\r\n                  position: 'absolute',\r\n                  top: 2,\r\n                  right: 2,\r\n                  backgroundColor: theme.colors.error,\r\n                  color: '#fff',\r\n                }}\r\n              >\r\n                {cartItemsCount}\r\n              </Badge>\r\n            )}\r\n          </View>\r\n\r\n          {/* Botón Vaciar Carrito */}\r\n          {cartItemsCount > 0 && (\r\n            <IconButton\r\n              icon={() => <Ionicons name=\"trash-outline\" size={22} color=\"#fff\" />}\r\n              style={{ backgroundColor: theme.colors.error }}\r\n              onPress={handleClearCart}\r\n            />\r\n          )}\r\n\r\n          {/* Botón Logout */}\r\n          <IconButton\r\n            icon={() => <Ionicons name=\"log-out-outline\" size={22} color={theme.colors.error} />}\r\n            onPress={logout}\r\n            style={styles.logoutBtn}\r\n            mode=\"contained-tonal\"\r\n          />\r\n        </View>\r\n      </Surface>\r\n\r\n      {/* Lista de productos animada */}\r\n      <Animated.View\r\n        style={{\r\n          flex: 1,\r\n          opacity: fadeAnim,\r\n          transform: [\r\n            {\r\n              translateY: fadeAnim.interpolate({\r\n                inputRange: [0, 1],\r\n                outputRange: [20, 0],\r\n              }),\r\n            },\r\n          ],\r\n        }}\r\n      >\r\n        <FlatList\r\n          data={PRODUCTS}\r\n          keyExtractor={(p) => p.id}\r\n          renderItem={({ item }) => <ProductCard product={item} onAdd={add} />}\r\n          contentContainerStyle={styles.listContent}\r\n          showsVerticalScrollIndicator={false}\r\n        />\r\n      </Animated.View>\r\n\r\n      {/* Botón flotante de carrito */}\r\n      {cartItemsCount > 0 && (\r\n        <FAB\r\n          icon=\"cart-check\"\r\n          label={`Ver carrito (${cartItemsCount})`}\r\n          style={[styles.fab, { backgroundColor: theme.colors.success }]}\r\n          color=\"#fff\"\r\n          onPress={() => navigation.navigate('Cart')}\r\n        />\r\n      )}\r\n    </SafeAreaView>\r\n  );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  container: { flex: 1 },\r\n  header: {\r\n    flexDirection: 'row',\r\n    justifyContent: 'space-between',\r\n    alignItems: 'center',\r\n    paddingHorizontal: 18,\r\n    paddingVertical: 12,\r\n    margin: 12,\r\n    borderRadius: 16,\r\n    backgroundColor: '#fff',\r\n  },\r\n  actions: {\r\n    flexDirection: 'row',\r\n    alignItems: 'center',\r\n    gap: 6,\r\n  },\r\n  listContent: {\r\n    paddingHorizontal: 12,\r\n    paddingBottom: 90,\r\n  },\r\n  fab: {\r\n    position: 'absolute',\r\n    bottom: 20,\r\n    right: 20,\r\n    borderRadius: 30,\r\n    elevation: 6,\r\n  },\r\n  logoutBtn: {\r\n    backgroundColor: '#fff',\r\n  },\r\n});\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}