{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nimport React, { createContext, useContext, useState, useMemo } from 'react';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nvar CartContext = createContext(undefined);\nexport var useCart = function useCart() {\n  var ctx = useContext(CartContext);\n  if (!ctx) throw new Error('useCart must be used within a CartProvider');\n  return ctx;\n};\nexport var CartProvider = function CartProvider(_ref) {\n  var children = _ref.children;\n  var _useState = useState([]),\n    _useState2 = _slicedToArray(_useState, 2),\n    items = _useState2[0],\n    setItems = _useState2[1];\n  var add = function add(product) {\n    var qty = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n    setItems(function (prev) {\n      var existing = prev.find(function (i) {\n        return i.product.id === product.id;\n      });\n      if (existing) {\n        return prev.map(function (i) {\n          return i.product.id === product.id ? _objectSpread(_objectSpread({}, i), {}, {\n            quantity: i.quantity + qty\n          }) : i;\n        });\n      }\n      return [].concat(_toConsumableArray(prev), [{\n        product: product,\n        quantity: qty\n      }]);\n    });\n  };\n  var remove = function remove(productId) {\n    setItems(function (prev) {\n      return prev.filter(function (i) {\n        return i.product.id !== productId;\n      });\n    });\n  };\n  var increaseQty = function increaseQty(productId) {\n    setItems(function (prev) {\n      return prev.map(function (i) {\n        return i.product.id === productId ? _objectSpread(_objectSpread({}, i), {}, {\n          quantity: i.quantity + 1\n        }) : i;\n      });\n    });\n  };\n  var decreaseQty = function decreaseQty(productId) {\n    setItems(function (prev) {\n      return prev.map(function (i) {\n        return i.product.id === productId ? _objectSpread(_objectSpread({}, i), {}, {\n          quantity: Math.max(1, i.quantity - 1)\n        }) : i;\n      });\n    });\n  };\n  var setQty = function setQty(productId, qty) {\n    if (qty < 1) return;\n    setItems(function (prev) {\n      return prev.map(function (i) {\n        return i.product.id === productId ? _objectSpread(_objectSpread({}, i), {}, {\n          quantity: qty\n        }) : i;\n      });\n    });\n  };\n  var clear = function clear() {\n    return setItems([]);\n  };\n  var total = useMemo(function () {\n    return items.reduce(function (sum, i) {\n      return sum + i.product.price * i.quantity;\n    }, 0);\n  }, [items]);\n  var itemCount = useMemo(function () {\n    return items.reduce(function (sum, i) {\n      return sum + i.quantity;\n    }, 0);\n  }, [items]);\n  return _jsx(CartContext.Provider, {\n    value: {\n      items: items,\n      add: add,\n      remove: remove,\n      increaseQty: increaseQty,\n      decreaseQty: decreaseQty,\n      setQty: setQty,\n      clear: clear,\n      total: total,\n      itemCount: itemCount\n    },\n    children: children\n  });\n};","map":{"version":3,"names":["React","createContext","useContext","useState","useMemo","jsx","_jsx","CartContext","undefined","useCart","ctx","Error","CartProvider","_ref","children","_useState","_useState2","_slicedToArray","items","setItems","add","product","qty","arguments","length","prev","existing","find","i","id","map","_objectSpread","quantity","concat","_toConsumableArray","remove","productId","filter","increaseQty","decreaseQty","Math","max","setQty","clear","total","reduce","sum","price","itemCount","Provider","value"],"sources":["C:/Users/Digitacion Nery/Desktop/TornilloFeliz/APP_MOBILE_DESARROLLO/src/contexts/CartContext.tsx"],"sourcesContent":["import React, { createContext, useContext, useState, useMemo } from 'react';\r\n\r\nexport type Product = { id: string; name: string; price: number; image?: string };\r\nexport type CartItem = { product: Product; quantity: number };\r\n\r\nexport interface CartContextType {\r\n  items: CartItem[];\r\n  add: (product: Product, qty?: number) => void;\r\n  remove: (productId: string) => void;\r\n  increaseQty: (productId: string) => void;\r\n  decreaseQty: (productId: string) => void;\r\n  setQty: (productId: string, qty: number) => void;\r\n  clear: () => void;\r\n  total: number;\r\n  itemCount: number;\r\n}\r\n\r\nconst CartContext = createContext<CartContextType | undefined>(undefined);\r\n\r\nexport const useCart = (): CartContextType => {\r\n  const ctx = useContext(CartContext);\r\n  if (!ctx) throw new Error('useCart must be used within a CartProvider');\r\n  return ctx;\r\n};\r\n\r\nexport const CartProvider: React.FC<{ children: React.ReactNode }> = ({ children }) => {\r\n  const [items, setItems] = useState<CartItem[]>([]);\r\n\r\n  const add = (product: Product, qty: number = 1) => {\r\n    setItems(prev => {\r\n      const existing = prev.find(i => i.product.id === product.id);\r\n      if (existing) {\r\n        return prev.map(i =>\r\n          i.product.id === product.id ? { ...i, quantity: i.quantity + qty } : i\r\n        );\r\n      }\r\n      return [...prev, { product, quantity: qty }];\r\n    });\r\n  };\r\n\r\n  const remove = (productId: string) => {\r\n    setItems(prev => prev.filter(i => i.product.id !== productId));\r\n  };\r\n\r\n  const increaseQty = (productId: string) => {\r\n    setItems(prev =>\r\n      prev.map(i =>\r\n        i.product.id === productId ? { ...i, quantity: i.quantity + 1 } : i\r\n      )\r\n    );\r\n  };\r\n\r\n  const decreaseQty = (productId: string) => {\r\n    setItems(prev =>\r\n      prev.map(i =>\r\n        i.product.id === productId\r\n          ? { ...i, quantity: Math.max(1, i.quantity - 1) }\r\n          : i\r\n      )\r\n    );\r\n  };\r\n\r\n  const setQty = (productId: string, qty: number) => {\r\n    if (qty < 1) return;\r\n    setItems(prev =>\r\n      prev.map(i =>\r\n        i.product.id === productId ? { ...i, quantity: qty } : i\r\n      )\r\n    );\r\n  };\r\n\r\n  const clear = () => setItems([]);\r\n\r\n  // Memoized totals to avoid unnecessary recalculations\r\n  const total = useMemo(\r\n    () => items.reduce((sum, i) => sum + i.product.price * i.quantity, 0),\r\n    [items]\r\n  );\r\n\r\n  const itemCount = useMemo(\r\n    () => items.reduce((sum, i) => sum + i.quantity, 0),\r\n    [items]\r\n  );\r\n\r\n  return (\r\n    <CartContext.Provider\r\n      value={{\r\n        items,\r\n        add,\r\n        remove,\r\n        increaseQty,\r\n        decreaseQty,\r\n        setQty,\r\n        clear,\r\n        total,\r\n        itemCount,\r\n      }}\r\n    >\r\n      {children}\r\n    </CartContext.Provider>\r\n  );\r\n};\r\n"],"mappings":";;;;;AAAA,OAAOA,KAAK,IAAIC,aAAa,EAAEC,UAAU,EAAEC,QAAQ,EAAEC,OAAO,QAAQ,OAAO;AAAC,SAAAC,GAAA,IAAAC,IAAA;AAiB5E,IAAMC,WAAW,GAAGN,aAAa,CAA8BO,SAAS,CAAC;AAEzE,OAAO,IAAMC,OAAO,GAAG,SAAVA,OAAOA,CAAA,EAA0B;EAC5C,IAAMC,GAAG,GAAGR,UAAU,CAACK,WAAW,CAAC;EACnC,IAAI,CAACG,GAAG,EAAE,MAAM,IAAIC,KAAK,CAAC,4CAA4C,CAAC;EACvE,OAAOD,GAAG;AACZ,CAAC;AAED,OAAO,IAAME,YAAqD,GAAG,SAAxDA,YAAqDA,CAAAC,IAAA,EAAqB;EAAA,IAAfC,QAAQ,GAAAD,IAAA,CAARC,QAAQ;EAC9E,IAAAC,SAAA,GAA0BZ,QAAQ,CAAa,EAAE,CAAC;IAAAa,UAAA,GAAAC,cAAA,CAAAF,SAAA;IAA3CG,KAAK,GAAAF,UAAA;IAAEG,QAAQ,GAAAH,UAAA;EAEtB,IAAMI,GAAG,GAAG,SAANA,GAAGA,CAAIC,OAAgB,EAAsB;IAAA,IAApBC,GAAW,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAf,SAAA,GAAAe,SAAA,MAAG,CAAC;IAC5CJ,QAAQ,CAAC,UAAAM,IAAI,EAAI;MACf,IAAMC,QAAQ,GAAGD,IAAI,CAACE,IAAI,CAAC,UAAAC,CAAC;QAAA,OAAIA,CAAC,CAACP,OAAO,CAACQ,EAAE,KAAKR,OAAO,CAACQ,EAAE;MAAA,EAAC;MAC5D,IAAIH,QAAQ,EAAE;QACZ,OAAOD,IAAI,CAACK,GAAG,CAAC,UAAAF,CAAC;UAAA,OACfA,CAAC,CAACP,OAAO,CAACQ,EAAE,KAAKR,OAAO,CAACQ,EAAE,GAAAE,aAAA,CAAAA,aAAA,KAAQH,CAAC;YAAEI,QAAQ,EAAEJ,CAAC,CAACI,QAAQ,GAAGV;UAAG,KAAKM,CAAC;QAAA,CACxE,CAAC;MACH;MACA,UAAAK,MAAA,CAAAC,kBAAA,CAAWT,IAAI,IAAE;QAAEJ,OAAO,EAAPA,OAAO;QAAEW,QAAQ,EAAEV;MAAI,CAAC;IAC7C,CAAC,CAAC;EACJ,CAAC;EAED,IAAMa,MAAM,GAAG,SAATA,MAAMA,CAAIC,SAAiB,EAAK;IACpCjB,QAAQ,CAAC,UAAAM,IAAI;MAAA,OAAIA,IAAI,CAACY,MAAM,CAAC,UAAAT,CAAC;QAAA,OAAIA,CAAC,CAACP,OAAO,CAACQ,EAAE,KAAKO,SAAS;MAAA,EAAC;IAAA,EAAC;EAChE,CAAC;EAED,IAAME,WAAW,GAAG,SAAdA,WAAWA,CAAIF,SAAiB,EAAK;IACzCjB,QAAQ,CAAC,UAAAM,IAAI;MAAA,OACXA,IAAI,CAACK,GAAG,CAAC,UAAAF,CAAC;QAAA,OACRA,CAAC,CAACP,OAAO,CAACQ,EAAE,KAAKO,SAAS,GAAAL,aAAA,CAAAA,aAAA,KAAQH,CAAC;UAAEI,QAAQ,EAAEJ,CAAC,CAACI,QAAQ,GAAG;QAAC,KAAKJ,CAAC;MAAA,CACrE,CAAC;IAAA,CACH,CAAC;EACH,CAAC;EAED,IAAMW,WAAW,GAAG,SAAdA,WAAWA,CAAIH,SAAiB,EAAK;IACzCjB,QAAQ,CAAC,UAAAM,IAAI;MAAA,OACXA,IAAI,CAACK,GAAG,CAAC,UAAAF,CAAC;QAAA,OACRA,CAAC,CAACP,OAAO,CAACQ,EAAE,KAAKO,SAAS,GAAAL,aAAA,CAAAA,aAAA,KACjBH,CAAC;UAAEI,QAAQ,EAAEQ,IAAI,CAACC,GAAG,CAAC,CAAC,EAAEb,CAAC,CAACI,QAAQ,GAAG,CAAC;QAAC,KAC7CJ,CAAC;MAAA,CACP,CAAC;IAAA,CACH,CAAC;EACH,CAAC;EAED,IAAMc,MAAM,GAAG,SAATA,MAAMA,CAAIN,SAAiB,EAAEd,GAAW,EAAK;IACjD,IAAIA,GAAG,GAAG,CAAC,EAAE;IACbH,QAAQ,CAAC,UAAAM,IAAI;MAAA,OACXA,IAAI,CAACK,GAAG,CAAC,UAAAF,CAAC;QAAA,OACRA,CAAC,CAACP,OAAO,CAACQ,EAAE,KAAKO,SAAS,GAAAL,aAAA,CAAAA,aAAA,KAAQH,CAAC;UAAEI,QAAQ,EAAEV;QAAG,KAAKM,CAAC;MAAA,CAC1D,CAAC;IAAA,CACH,CAAC;EACH,CAAC;EAED,IAAMe,KAAK,GAAG,SAARA,KAAKA,CAAA;IAAA,OAASxB,QAAQ,CAAC,EAAE,CAAC;EAAA;EAGhC,IAAMyB,KAAK,GAAGxC,OAAO,CACnB;IAAA,OAAMc,KAAK,CAAC2B,MAAM,CAAC,UAACC,GAAG,EAAElB,CAAC;MAAA,OAAKkB,GAAG,GAAGlB,CAAC,CAACP,OAAO,CAAC0B,KAAK,GAAGnB,CAAC,CAACI,QAAQ;IAAA,GAAE,CAAC,CAAC;EAAA,GACrE,CAACd,KAAK,CACR,CAAC;EAED,IAAM8B,SAAS,GAAG5C,OAAO,CACvB;IAAA,OAAMc,KAAK,CAAC2B,MAAM,CAAC,UAACC,GAAG,EAAElB,CAAC;MAAA,OAAKkB,GAAG,GAAGlB,CAAC,CAACI,QAAQ;IAAA,GAAE,CAAC,CAAC;EAAA,GACnD,CAACd,KAAK,CACR,CAAC;EAED,OACEZ,IAAA,CAACC,WAAW,CAAC0C,QAAQ;IACnBC,KAAK,EAAE;MACLhC,KAAK,EAALA,KAAK;MACLE,GAAG,EAAHA,GAAG;MACHe,MAAM,EAANA,MAAM;MACNG,WAAW,EAAXA,WAAW;MACXC,WAAW,EAAXA,WAAW;MACXG,MAAM,EAANA,MAAM;MACNC,KAAK,EAALA,KAAK;MACLC,KAAK,EAALA,KAAK;MACLI,SAAS,EAATA;IACF,CAAE;IAAAlC,QAAA,EAEDA;EAAQ,CACW,CAAC;AAE3B,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}